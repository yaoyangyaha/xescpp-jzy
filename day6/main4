#include<bits/stdc++.h>
#define int long long
using namespace std;
int a[5010][5010],b[5010][5010];
int n,m,k;
void xg(int x1,int y1){
	int x2=x1+k-1;
	int y2=y1+k-1;
	if(x2>n||y2>n){
		cout << -1;
		exit(0);
	}
	b[x1][y1]+=c;
	b[x1][y2+1]-=c;
	b[x2+1][y1]+=c;
	b[x2+1][y2+1]-=c;
}
int main(){
    cin >> n >>m >>k;
    for(int i = 1;i<=m;i++){
    	int x,y,z;
    	scanf("%d%d%d",&x,&y,&z);
    	a[x][y]=z;
	}
	int ans=0;
	for(int i = 1;i<=n;i++){
		for(int j = 1;j<=n;j++){
			b[i][j]=b[i][j]+b[i-1][j]+b[i][j-1]-b[i-1][j-1];
			int x = b[i][j]+a[i][j];
			if(x!=0){
				ans+=abs(x);
				xg(i,j,-x);
			}
		}
	}
	cout << ans;
}
